<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>SpaceDino</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/phaser@3.70.0/dist/phaser.js"></script>
  <style>
    html, body { margin: 0; padding: 0; overflow: hidden; }
    canvas { display: block; }
  </style>
</head>
<body>
<script>
Telegram.WebApp.ready();

const config = {
  type: Phaser.AUTO,
  width: window.innerWidth,
  height: window.innerHeight,
  backgroundColor: '#000000',
  scene: { preload, create }
};

let coins = 0;
let coinsText;

new Phaser.Game(config);

function preload() {
  this.load.image('dino', 'https://labs.phaser.io/assets/sprites/dino.png');
  this.load.image('bg', 'https://labs.phaser.io/assets/skies/space3.png');
  this.load.audio('click', 'https://labs.phaser.io/assets/audio/SoundEffects/click.mp3');
  this.load.image('coin', 'https://labs.phaser.io/assets/sprites/coin.png');
}

function create() {
  const centerX = this.scale.width / 2;
  const centerY = this.scale.height / 2;

  // –§–æ–Ω
  this.add.image(centerX, centerY, 'bg').setDisplaySize(this.scale.width, this.scale.height);

  // –ó–≤—É–∫
  const clickSound = this.sound.add('click');

  // –î–∏–Ω–æ–∑–∞–≤—Ä
  const dino = this.add.image(centerX, centerY, 'dino').setScale(2);

  // –ó–æ–Ω–∞ –∫–ª–∏–∫–∞ ‚Äî –≤–µ—Å—å —ç–∫—Ä–∞–Ω
  const clickZone = this.add.zone(0, 0, this.scale.width, this.scale.height)
    .setOrigin(0)
    .setInteractive();

  clickZone.on('pointerdown', (pointer) => {
    coins++;
    coinsText.setText(`Coins: ${coins}`);
    clickSound.play();

    // –ê–Ω–∏–º–∞—Ü–∏—è –º–æ–Ω–µ—Ç–∫–∏
    const coin = this.add.image(pointer.x, pointer.y, 'coin').setScale(0.5);
    this.tweens.add({
      targets: coin,
      y: coin.y - 100,
      alpha: 0,
      duration: 600,
      onComplete: () => coin.destroy()
    });
  });

  // –¢–µ–∫—Å—Ç –º–æ–Ω–µ—Ç
  coinsText = this.add.text(20, 20, 'Coins: 0', { font: '24px Arial', fill: '#ffffff' });

  // –ö–Ω–æ–ø–∫–∏ —Å–Ω–∏–∑—É
  const buttons = ['üõí –ú–∞–≥–∞–∑–∏–Ω', '‚öîÔ∏è –ë–∏—Ç–≤–∞', '‚ùì –ö–∞–∫ –∏–≥—Ä–∞—Ç—å', 'üè† –î–æ–º'];
  const btnWidth = this.scale.width / 4;

  buttons.forEach((text, i) => {
    const btn = this.add.text(i * btnWidth + btnWidth / 2, this.scale.height - 40, text, {
      font: '18px Arial',
      fill: '#ffffff',
      backgroundColor: '#222'
    }).setOrigin(0.5).setPadding(10).setInteractive();

    btn.on('pointerdown', () => {
      console.log(`–ù–∞–∂–∞—Ç–∞ –∫–Ω–æ–ø–∫–∞: ${text}`);
    });
  });
}
</script>
</body>
</html>

