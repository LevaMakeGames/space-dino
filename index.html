<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>SpaceDino</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/phaser@3.70.0/dist/phaser.min.js"></script>
  <style>
    html, body { margin: 0; padding: 0; overflow: hidden; }
    canvas { display: block; }
  </style>
</head>
<body>
<script>
Telegram.WebApp.ready();

const config = {
  type: Phaser.AUTO,
  width: window.innerWidth,
  height: window.innerHeight,
  backgroundColor: '#000000',
  scene: { preload }
};

let coins = 0;
let coinsText;

new Phaser.Game(config);

function preload() {
  this.load.image('bg', 'https://labs.phaser.io/assets/skies/space4.png');
  this.load.image('dino', 'https://labs.phaser.io/assets/sprites/phaser-dude.png');
  this.load.image('coin', 'https://github.com/LevaMakeGames/space-dino/blob/main/assets/coin.png?raw=true');

  this.load.once('complete', create, this);
  this.load.start();
}

function create() {
  const width = this.scale.width;
  const height = this.scale.height;
  const centerX = width / 2;
  const centerY = height / 2;

  this.add.image(centerX, centerY, 'bg').setDisplaySize(width, height);
  this.add.image(centerX, centerY, 'dino').setScale(2);

  const clickZone = this.add.zone(0, 0, width, height).setOrigin(0).setInteractive();

  clickZone.on('pointerdown', (pointer) => {
    coins++;
    coinsText.setText(`Coins: ${coins}`);

    const coin = this.add.image(pointer.x, pointer.y, 'coin').setScale(0.3);
    this.tweens.add({
      targets: coin,
      y: coin.y - 100,
      alpha: 0,
      duration: 600,
      ease: 'Cubic.easeOut',
      onComplete: () => coin.destroy()
    });
  });

  coinsText = this.add.text(20, 20, 'Coins: 0', {
    font: '24px Arial',
    fill: '#ffffff'
  });

  const buttons = ['Магазин', 'Битва', 'Как играть', 'Дом'];
  const btnWidth = width / 4;

  buttons.forEach((text, i) => {
    const btn = this.add.text(i * btnWidth + btnWidth / 2, height - 40, text, {
      font: '18px Arial',
      fill: '#ffffff',
      backgroundColor: '#333'
    }).setOrigin(0.5).setPadding(8).setInteractive();

    btn.on('pointerdown', () => {
      console.log(`Нажата кнопка: ${text}`);
    });
  });
}
</script>
</body>
</html>
